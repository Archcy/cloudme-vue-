(function (e) { function t (t) { for (var i, s, o = t[0], l = t[1], c = t[2], d = 0, p = []; d < o.length; d++)s = o[d], r[s] && p.push(r[s][0]), r[s] = 0; for (i in l)Object.prototype.hasOwnProperty.call(l, i) && (e[i] = l[i]); u && u(t); while (p.length)p.shift()(); return n.push.apply(n, c || []), a() } function a () { for (var e, t = 0; t < n.length; t++) { for (var a = n[t], i = !0, o = 1; o < a.length; o++) { var l = a[o]; r[l] !== 0 && (i = !1) }i && (n.splice(t--, 1), e = s(s.s = a[0])) } return e } var i = {}; var r = { app: 0 }; var n = []; function s (t) { if (i[t]) return i[t].exports; var a = i[t] = { i: t, l: !1, exports: {} }; return e[t].call(a.exports, a, a.exports, s), a.l = !0, a.exports }s.m = e, s.c = i, s.d = function (e, t, a) { s.o(e, t) || Object.defineProperty(e, t, { enumerable: !0, get: a }) }, s.r = function (e) { typeof Symbol !== 'undefined' && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { value: 'Module' }), Object.defineProperty(e, '__esModule', { value: !0 }) }, s.t = function (e, t) { if (1 & t && (e = s(e)), 8 & t) return e; if (4 & t && typeof e === 'object' && e && e.__esModule) return e; var a = Object.create(null); if (s.r(a), Object.defineProperty(a, 'default', { enumerable: !0, value: e }), 2 & t && typeof e !== 'string') for (var i in e)s.d(a, i, function (t) { return e[t] }.bind(null, i)); return a }, s.n = function (e) { var t = e && e.__esModule ? function () { return e['default'] } : function () { return e }; return s.d(t, 'a', t), t }, s.o = function (e, t) { return Object.prototype.hasOwnProperty.call(e, t) }, s.p = '/'; var o = window['webpackJsonp'] = window['webpackJsonp'] || []; var l = o.push.bind(o); o.push = t, o = o.slice(); for (var c = 0; c < o.length; c++)t(o[c]); var u = l; n.push([1, 'chunk-vendors']), a() })({ 0: function (e, t) {}, 1: function (e, t, a) { e.exports = a('1d50') }, '16a0': function (e, t, a) { 'use strict'; var i = a('4e9d'); var r = a.n(i); r.a }, '1ccf': function (e, t, a) { 'use strict'; var i = a('fcf2'); var r = a.n(i); r.a }, '1d50': function (e, t, a) { 'use strict'; a.r(t); a('fef8'), a('76e3'), a('d36a'), a('1de2'); var i = a('2b0e'); var r = a('4af9'); var n = a('bc3a'); var s = a.n(n); s.a.defaults.baseURL = 'http://192.168.139.128', localStorage.token && (s.a.defaults.headers.common['Authorization'] = localStorage.token), s.a.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded'; var o = s.a.create(); var l = { login: function (e, t, a) { var i = this; if (a = arguments[arguments.length - 1], localStorage.token) return a && a(!0), void this.onChange(!0); c(e, t, function (e) { e.authenticated ? (localStorage.token = e.token, a && a(!0), i.onChange(!0)) : (a && a(!1), i.onChange(!1)) }) }, getToken: function () { return localStorage.token }, logout: function (e) { delete localStorage.token, e && e(), this.onChange(!1) }, loggedIn: function () { return !!localStorage.token }, onChange: function () {} }; function c (e, t, a) { setTimeout(function () { var i = {}; i.username = e, i.passwd = t; var r = JSON.stringify(i); o.post('/serverB/controller.php', r, { headers: { APPFUNC: 2 } }).then(function (e) { e.data.status === 'success' ? a({ authenticated: !0, token: e.data.token }) : a({ authenticated: !1 }) }).catch() }, 0) } var u = function () { var e = this; var t = e.$createElement; var a = e._self._c || t; return a('div', { attrs: { id: 'app' } }, [e.$route.matched.length ? void 0 : e._e(), a('router-view')], 2) }; var d = []; var p = { data: function () { return { loggedIn: l.loggedIn() } }, created: function () { var e = this; l.onChange = function (t) { e.loggedIn = t } } }; var h = p; var f = (a('a72a'), a('a6c2')); var v = Object(f['a'])(h, u, d, !1, null, null, null); var m = v.exports; var g = function () { var e = this; var t = e.$createElement; var a = e._self._c || t; return a('div', { attrs: { id: 'login-warpper' } }, [a('div', [a('button', [a('router-link', { staticStyle: { color: '#eee' }, attrs: { to: '/Reg' } }, [e._v('注册')])], 1)]), a('div', { attrs: { id: 'logo' } }), a('div', { attrs: { id: 'login-d' } }, [a('h2', { staticStyle: { margin: '5px 10px' } }, [e._v(' 请输入登录信息:')]), a('div', { staticClass: 'lg' }, [e._v('\r\n        用户名:\r\n        '), a('div', { staticClass: 'lginpt' }, [a('div', { staticClass: 'ipt' }, [a('input', { directives: [{ name: 'model', rawName: 'v-model', value: e.username, expression: 'username' }], attrs: { type: 'text', id: 'username', placeholder: '用户名' }, domProps: { value: e.username }, on: { input: function (t) { t.target.composing || (e.username = t.target.value) } } })])])]), a('div', { staticClass: 'lg' }, [e._v('\r\n        密码:\r\n        '), a('div', { staticClass: 'lginpt' }, [a('div', { staticClass: 'ipt' }, [a('input', { directives: [{ name: 'model', rawName: 'v-model', value: e.pass, expression: 'pass' }], attrs: { type: 'password', id: 'pass', placeholder: '密码' }, domProps: { value: e.pass }, on: { input: function (t) { t.target.composing || (e.pass = t.target.value) } } })])])]), a('div', { staticStyle: { clear: 'both' } }), a('div', { staticClass: 'lginpt', staticStyle: { 'background-color': '#fff' } }, [a('button', { staticStyle: { float: 'right' }, attrs: { type: 'submit' }, on: { click: e.login } }, [e._v('登录')])]), a('p', { staticClass: 'error' }, [e._v(e._s(e.error))])])]) }; var w = []; var F = (a('f3cc'), { name: 'login', data: function () { return { username: '', pass: '', code: '', error: '' } }, methods: { login: function () { var e = this; localStorage.CIC = 0, l.login(this.$data.username, this.$data.pass, function (t) { t ? (e.error = '', localStorage.username = e.$data.username, e.$router.replace(e.$route.query.redirect || '/')) : e.error = '登陆失败' }) } } }); var b = F; var _ = (a('379f'), a('1ee6'), Object(f['a'])(b, g, w, !1, null, '7b7857ee', null)); var x = _.exports; var y = function () { var e = this; var t = e.$createElement; var a = e._self._c || t; return a('div', { attrs: { id: 'login-warpper' } }, [a('div', [a('button', [a('router-link', { staticStyle: { color: '#eee' }, attrs: { to: '/Login' } }, [e._v('返回')])], 1)]), a('div', { attrs: { id: 'login-d' } }, [a('h2', { staticStyle: { margin: '5px 10px' } }, [e._v('请输入您的账户信息:')]), a('div', { staticClass: 'lg' }, [e._v('\r\n        用户名:\r\n        '), a('div', { staticClass: 'lginpt' }, [a('div', { staticClass: 'ipt' }, [a('input', { directives: [{ name: 'model', rawName: 'v-model', value: e.username, expression: 'username' }], attrs: { type: 'text', id: 'username', placeholder: '用户名' }, domProps: { value: e.username }, on: { input: function (t) { t.target.composing || (e.username = t.target.value) } } })])])]), a('div', { staticClass: 'lg' }, [e._v('\r\n        电话:\r\n        '), a('div', { staticClass: 'lginpt' }, [a('div', { staticClass: 'ipt' }, [a('input', { directives: [{ name: 'model', rawName: 'v-model', value: e.phone, expression: 'phone' }], attrs: { type: 'text', id: 'phone', placeholder: '电话' }, domProps: { value: e.phone }, on: { input: function (t) { t.target.composing || (e.phone = t.target.value) } } })])])]), a('div', { staticClass: 'lg' }, [e._v('\r\n        密码:\r\n        '), a('div', { staticClass: 'lginpt' }, [a('div', { staticClass: 'ipt' }, [a('input', { directives: [{ name: 'model', rawName: 'v-model', value: e.password, expression: 'password' }], attrs: { type: 'password', id: 'password', placeholder: '密码' }, domProps: { value: e.password }, on: { input: function (t) { t.target.composing || (e.password = t.target.value) } } })])])]), a('div', { staticClass: 'lg' }, [e._v('\r\n        邮箱:\r\n        '), a('div', { staticClass: 'lginpt' }, [a('div', { staticClass: 'ipt' }, [a('input', { directives: [{ name: 'model', rawName: 'v-model', value: e.mail, expression: 'mail' }], attrs: { type: 'mail', id: 'mail', placeholder: '邮箱' }, domProps: { value: e.mail }, on: { input: function (t) { t.target.composing || (e.mail = t.target.value) } } })])])]), a('div', { staticClass: 'lg' }, [e._v('\r\n        请重新输入您的密码:\r\n        '), a('div', { staticClass: 'lginpt' }, [a('div', { staticClass: 'ipt' }, [a('input', { directives: [{ name: 'model', rawName: 'v-model', value: e.password2, expression: 'password2' }], attrs: { type: 'password', id: 'password2', placeholder: '请重新输入您的密码' }, domProps: { value: e.password2 }, on: { input: function (t) { t.target.composing || (e.password2 = t.target.value) } } })])])]), a('div', { staticClass: 'lg' }, [e._v('\r\n        性别:\r\n        '), a('div', { staticClass: 'lginpt', staticStyle: { 'background-color': '#fff' } }, [a('div', { staticClass: 'ipt' }, [a('div', { staticStyle: { float: 'left', width: '100px' } }, [a('div', { staticClass: 'fl' }, [a('input', { attrs: { type: 'radio', id: 'male', name: 'sex' }, on: { change: e.male } }), a('label', { attrs: { for: 'male' } })]), a('div', { staticStyle: { float: 'left' } }, [e._v('男性')])]), a('div', { staticStyle: { float: 'left', width: '100px' } }, [a('div', { staticClass: 'fl' }, [a('input', { attrs: { type: 'radio', id: 'female', name: 'sex' }, on: { change: e.female } }), a('label', { attrs: { for: 'female' } })]), a('div', { staticClass: 'fl' }, [e._v('女性')])])])])]), a('div', { staticClass: 'lginpt', staticStyle: { 'background-color': '#fff', width: '700px', margin: '0px' } }, [a('button', { staticStyle: { 'background-color': 'blueviolet', float: 'right' }, attrs: { type: 'submit' }, on: { click: e.dealdata } }, [e._v('注册')]), a('div', { staticStyle: { color: 'red', float: 'right' } }, [e._v(e._s(e.perror))])]), a('div', { staticStyle: { clear: 'both' } })])]) }; var S = []; var C = { data: function () { return { UID: '', username: '', password: '', password2: '', code: '', phone: '', mail: '', sex: '', error: 1 } }, computed: { perror: function () { return this.$data.password != this.$data.password2 ? '密码输入不一致' : '' } }, methods: { male: function () { this.$data.sex = 'm' }, female: function () { this.$data.sex = 'f' }, dealdata: function () { var e = this; try { if (this.$data.username != '') if (this.$data.password == this.$data.password2) { var t = new Object(); t.username = this.$data.username, t.passwd = this.$data.password, t.mail = this.$data.mail, t.phone = this.$data.phone, t.sex = this.$data.sex; var a = JSON.stringify(t); o.post('/serverA/controller.php', a, { headers: { APPFUNC: 1 } }).then(function (t) { switch (t.data.status) { case '0':alert('用户名已经被占用'); break; case '3':alert('用户名非法'); break; case '1':var a = new Object(); a.username = e.$data.username, a.passwd = e.$data.password, a.mail = e.$data.mail, a.phone = e.$data.phone, a.UID = t.data.UID, e.$data.error = 0; var i = JSON.stringify(a); o.post('/serverB/controller.php', i, { headers: { APPFUNC: 1 } }).then(function (e) { switch (e.data) { case 1:alert('注册成功'); break } }); break } }) } else alert('两次密码输入不一致!'); else alert('请输入用户名！') } catch (i) { alert('注册错误，请联系管理员') } } } }; var P = C; var k = (a('3560'), a('3be2'), Object(f['a'])(P, y, S, !1, null, '1b5bf81b', null)); var I = k.exports; var N = function () { var e = this; var t = e.$createElement; var a = e._self._c || t; return a('div', { attrs: { id: 'cloud-warpper' } }, [a('div', { staticClass: 'nav', attrs: { id: 'c1' } }, [e._m(0), a('div', { attrs: { id: 'searchicon' } }), a('input', { directives: [{ name: 'model', rawName: 'v-model', value: e.search, expression: 'search' }], attrs: { id: 'search' }, domProps: { value: e.search }, on: { input: function (t) { t.target.composing || (e.search = t.target.value) } } }), a('button', { attrs: { id: 'user' }, on: { click: function (t) { return e.vshowdash() } } })]), a('div', { attrs: { id: 'side-panel' } }, [a('div', { staticClass: 'clom', staticStyle: { 'padding-top': '20px' } }), a('div', { staticClass: 'clom', on: { click: function (t) { return e.vshowup() } } }, [e._m(1)]), a('div', { staticClass: 'clom', style: e.diskcolor(0), on: { click: function (t) { e.fontview = 0, e.chgview() } } }, [a('button', { attrs: { id: 'maindisk' } }), a('p', [e._v('我的网盘')])]), a('div', { staticClass: 'clom', style: e.diskcolor(1), on: { click: function (t) { e.fontview = 1, e.chgview() } } }, [a('button', { attrs: { id: 'bookmark' } }), a('p', [e._v('我的收藏')])]), a('div', { staticClass: 'clom', style: e.diskcolor(2), on: { click: function (t) { e.fontview = 2, e.chgview() } } }, [a('button', { attrs: { id: 'shared' } }), a('p', [e._v('我的分享')])]), a('div', { staticClass: 'clom' }), a('div', { staticClass: 'usage-panel' }, [a('div', { attrs: { id: 'usage-ind' } }, [a('br'), a('p', [e._v('已使用:' + e._s(e.fileSize(e.StorageUsed)))]), a('p', [e._v('总量:' + e._s(e.fileSize(e.StorageTotal)))]), a('div', { style: 'height:' + e.StorageUsed / e.StorageTotal + '%', attrs: { id: 'usage-in' } })])])]), a('transition', { attrs: { name: 'fade' } }, [e.showup ? a('div', { attrs: { id: 'UploadePage' } }, [a('ul', [a('uploader', { attrs: { 'end-point': '/serverB/controller.php', multiple: !0, multipart: !0, FPID: e.FNowID } })], 1), a('button', { staticStyle: { 'background-color': 'lightcoral', width: '40px', position: 'fixed', top: '12%', left: '68%', 'z-index': '21' }, on: { click: function (t) { return e.vshowup() } } }, [a('p', [e._v('X')])])]) : e._e()]), a('transition', { attrs: { name: 'fade' } }, [e.showdash ? a('dash') : e._e()], 1), a('transition', { attrs: { name: 'bounce' } }, [e.showdetail ? a('div', { attrs: { id: 'detail' } }, [a('div', { staticClass: 'dtline' }, [e._v('文件名: ' + e._s(e.detailinfo.FName))]), a('div', { staticClass: 'dtline' }, [e._v('文件大小: ' + e._s(e.fileSize(e.detailinfo.Fsize)))]), a('div', { staticClass: 'dtline' }, [e._v('真实文件ID: ' + e._s(e.detailinfo.FID))]), a('div', { staticClass: 'dtline' }, [e._v('收藏状态: ' + e._s(e.detailinfo.Fav))]), a('div', { staticClass: 'dtline' }, [e._v('\r\n          分享状态: ' + e._s(e.detailinfo.FShare) + '\r\n          '), a('button', { directives: [{ name: 'show', rawName: 'v-show', value: e.detailinfo.FShare == 0, expression: '(detailinfo.FShare==0)' }], on: { click: function (t) { return e.sharethefile(e.detailinfo) } } }, [e._v('分享文件')]), a('button', { directives: [{ name: 'show', rawName: 'v-show', value: e.detailinfo.FShare == 1, expression: '(detailinfo.FShare==1)' }], on: { click: function (t) { return e.unsharethefile(e.detailinfo) } } }, [e._v('取消分享')])]), a('div', { directives: [{ name: 'show', rawName: 'v-show', value: e.getshare(e.detailinfo), expression: 'getshare(detailinfo)' }], staticClass: 'dtline' }, [a('p', [e._v('分享地址:')]), a('textarea', { staticStyle: { width: '200px', height: '40px', margin: '3px 1px', float: 'left' }, attrs: { id: 'sctxt' } }), a('button', { on: { click: function (t) { return e.shareurl() } } }, [e._v('复制链接')])]), a('button', { staticStyle: { 'background-color': 'lightcoral', width: '40px', position: 'absolute', top: '0%', right: '0%', 'z-index': '21' }, on: { click: function (t) { e.showdetail = 0 } } }, [a('p', [e._v('X')])])]) : e._e()]), a('transition', { attrs: { name: 'fade' } }, [e.shownf ? a('div', { attrs: { id: 'newfoler' } }, [a('div', { staticStyle: { position: 'fixed', left: '40%', top: '40%', 'border-radius': '15px', 'background-color': '#fff', width: '320px', height: '160px' } }, [a('button', { staticStyle: { 'background-color': 'lightcoral', width: '40px', float: 'right', 'margin-right': '-10px', 'margin-top': '-10px' }, on: { click: function (t) { e.shownf = 0 } } }, [a('p', [e._v('X')])]), a('div', { staticStyle: { margin: '10px 10px', width: '300px', height: '140px' } }, [a('div', [e._v('请输入文件夹名')]), a('div', { staticStyle: { 'background-color': '#fff' } }, [a('input', { directives: [{ name: 'model', rawName: 'v-model', value: e.NFname, expression: 'NFname' }], attrs: { type: 'text', id: 'pf1', placeholder: '新建文件夹' }, domProps: { value: e.NFname }, on: { input: function (t) { t.target.composing || (e.NFname = t.target.value) } } })]), a('button', { on: { click: function (t) { return e.newFolder() } } }, [e._v('确定')])])])]) : e._e()]), a('div', { attrs: { id: 'location' } }, [a('p', { staticStyle: { 'margin-left': '250px', 'margin-top': '5px', float: 'left' } }, [e._v('我的网盘:' + e._s(e.getLocation(e.FullPName)))]), a('div', { staticClass: 'fopt' }, [a('div', { attrs: { id: 'del' }, on: { click: function (t) { return e.processqueue(2) } } }), a('div', { attrs: { id: 'down' }, on: { click: function (t) { return e.processqueue(1) } } }), a('div', { directives: [{ name: 'show', rawName: 'v-show', value: e.progress != 0 && e.progress != 1, expression: 'progress!=0&&progress!=1' }], staticStyle: { width: '280px', height: '40px', 'margin-right': '15px' } }, [a('p', { staticStyle: { 'font-size': '20px', float: 'left', width: '70px', height: '28px', margin: '3px 0px' } }, [e._v('下载中')]), a('div', { attrs: { id: 'progress-bar' } }, [a('div', { style: 'width:' + 100 * e.progress + '%', attrs: { id: 'progress' } })])])])]), e.fontview == 0 ? a('div', { staticClass: 'cloud-container' }, [a('div', { staticStyle: { 'min-width': '200px', height: '30px' } }, [a('p', { staticStyle: { float: 'left' } }, [e._v('文件夹:')]), a('button', { attrs: { id: 'newF' }, on: { click: function (t) { return e.vshownf() } } }, [e._v('新建文件夹')])]), a('div', { staticStyle: { float: 'none', width: '100%', height: 'auto', margin: '5px 5px' } }, [a('transition', { attrs: { name: 'bounce' } }, [a('div', { directives: [{ name: 'show', rawName: 'v-show', value: e.FNowID != 0, expression: 'FNowID!=0' }], staticClass: 'folder' }, [a('div', { staticClass: 'folder-logo', on: { click: function (t) { return e.backtoFolder(e.FPID) } } }), a('div', { staticClass: 'options', on: { click: function (t) { return e.backtoFolder(e.FPID) } } }, [a('div', { staticClass: 'pname' }, [e._v('返回:')])])])]), a('transition-group', { attrs: { appear: '', name: 'bounce', tag: 'div', mode: 'out-in' } }, e._l(e.isLocation(e.isdir(e.SearchFile(e.fileIndex))), function (t) { return a('div', { key: t['FID'], staticClass: 'folder', style: e.isfav(t) }, [a('div', { staticClass: 'folder-logo', on: { click: function (a) { return e.enterFolder(t) } } }), a('div', { staticClass: 'options' }, [a('div', { staticClass: 'pname', on: { click: function (a) { return e.enterFolder(t) } } }, [e._v(e._s(t['FName']))]), a('div', { staticStyle: { float: 'right', width: '30px', height: '60px' } }, [a('div', { staticClass: 'delete', on: { click: function (a) { return e.delteFolder(t) } } }), a('div', { directives: [{ name: 'show', rawName: 'v-show', value: t.Fav == 0, expression: '(fileInfo.Fav==0)' }], staticClass: 'fav', on: { click: function (a) { return e.Fav(t) } } }), a('div', { directives: [{ name: 'show', rawName: 'v-show', value: t.Fav == 1, expression: '(fileInfo.Fav==1)' }], staticClass: 'faved', on: { click: function (a) { return e.Fav(t) } } })])])]) }), 0), a('div', { staticStyle: { height: '3px', width: '100%', clear: 'both' } })], 1), e._m(2), a('transition-group', { attrs: { appear: '', name: 'bounce', tag: 'div', mode: 'out-in' } }, e._l(e.isLocation(e.isfile(e.SearchFile(e.fileIndex))), function (t) { return a('div', { key: t['FID'], staticClass: 'file' }, [a('div', { staticClass: 'file-logo', on: { click: function (a) { return e.vshowdetail(t) } } }, [a('div', { directives: [{ name: 'show', rawName: 'v-show', value: t.FShare == 1, expression: '(fileInfo.FShare==1)' }], staticClass: 'share' }), a('div', { staticClass: 'filewith' }), a('div', { staticClass: 'name' }, [a('p', { staticClass: 'pname' }, [e._v(e._s(t['FName']))])])]), a('div', { staticClass: 'options', style: e.isfav(t) }, [a('div', { staticClass: 'checkbox' }, [a('input', { directives: [{ name: 'model', rawName: 'v-model', value: e.Selected, expression: 'Selected' }], attrs: { type: 'checkbox', id: t['FID'] }, domProps: { value: t, checked: Array.isArray(e.Selected) ? e._i(e.Selected, t) > -1 : e.Selected }, on: { change: function (a) { var i = e.Selected; var r = a.target; var n = !!r.checked; if (Array.isArray(i)) { var s = t; var o = e._i(i, s); r.checked ? o < 0 && (e.Selected = i.concat([s])) : o > -1 && (e.Selected = i.slice(0, o).concat(i.slice(o + 1))) } else e.Selected = n } } }), a('label', { attrs: { for: t['FID'] } })]), a('div', { staticClass: 'download', on: { click: function (a) { return e.download(t) } } }), a('div', { staticClass: 'delete', on: { click: function (a) { return e.deletefile(t['FID'], 0) } } }), a('p', { staticStyle: { float: 'left', width: '100px', height: '20px', 'margin-top': '8px', 'margin-left': '5px' } }, [e._v(e._s(t['Ftime'].substring(0, 10)))]), a('div', { staticStyle: { height: '20px', width: '160px', cursor: 'auto' } }, [e._v('Size:' + e._s(e.fileSize(t['Fsize'])))]), a('transition', { attrs: { name: 'bounce-x' } }, [a('div', { directives: [{ name: 'show', rawName: 'v-show', value: t.Fav == 0, expression: '(fileInfo.Fav==0)' }], staticClass: 'fav', on: { click: function (a) { return e.Fav(t) } } })]), a('transition', { attrs: { name: 'bounce-x' } }, [a('div', { directives: [{ name: 'show', rawName: 'v-show', value: t.Fav == 1, expression: '(fileInfo.Fav==1)' }], staticClass: 'faved', on: { click: function (a) { return e.Fav(t) } } })])], 1)]) }), 0), a('div', { staticStyle: { height: '180px', width: '100%', clear: 'both' } })], 1) : e._e(), e.fontview == 1 ? a('div', { staticClass: 'cloud-container' }, [e._m(3), a('transition-group', { attrs: { appear: '', name: 'bounce', tag: 'div', mode: 'out-in' } }, e._l(e.isfile(e.isFaved(e.SearchFile(e.fileIndex))), function (t) { return a('div', { key: t['FID'], staticClass: 'file' }, [a('div', { staticClass: 'file-logo', on: { click: function (a) { return e.vshowdetail(t) } } }, [a('div', { directives: [{ name: 'show', rawName: 'v-show', value: t.FShare == 1, expression: '(fileInfo.FShare==1)' }], staticClass: 'share' }), a('div', { staticClass: 'filewith' }), a('div', { staticClass: 'name' }, [a('p', { staticClass: 'pname' }, [e._v(e._s(t['FName']))])])]), a('div', { staticClass: 'options', style: e.isfav(t) }, [a('div', { staticClass: 'checkbox' }, [a('input', { directives: [{ name: 'model', rawName: 'v-model', value: e.Selected, expression: 'Selected' }], attrs: { type: 'checkbox', id: t['FID'] }, domProps: { value: t, checked: Array.isArray(e.Selected) ? e._i(e.Selected, t) > -1 : e.Selected }, on: { change: function (a) { var i = e.Selected; var r = a.target; var n = !!r.checked; if (Array.isArray(i)) { var s = t; var o = e._i(i, s); r.checked ? o < 0 && (e.Selected = i.concat([s])) : o > -1 && (e.Selected = i.slice(0, o).concat(i.slice(o + 1))) } else e.Selected = n } } }), a('label', { attrs: { for: t['FID'] } })]), a('div', { staticClass: 'download', on: { click: function (a) { return e.download(t) } } }), a('div', { staticClass: 'delete', on: { click: function (a) { return e.deletefile(t['FID'], 0) } } }), a('p', { staticStyle: { float: 'left', width: '100px', height: '20px', 'margin-top': '8px', 'margin-left': '5px' } }, [e._v(e._s(t['Ftime'].substring(0, 10)))]), a('div', { staticStyle: { height: '20px', width: '160px', cursor: 'auto' } }, [e._v('Size:' + e._s(e.fileSize(t['Fsize'])))]), a('transition', { attrs: { name: 'bounce-x' } }, [a('div', { directives: [{ name: 'show', rawName: 'v-show', value: t.Fav == 0, expression: '(fileInfo.Fav==0)' }], staticClass: 'fav', on: { click: function (a) { return e.Fav(t) } } })]), a('transition', { attrs: { name: 'bounce-x' } }, [a('div', { directives: [{ name: 'show', rawName: 'v-show', value: t.Fav == 1, expression: '(fileInfo.Fav==1)' }], staticClass: 'faved', on: { click: function (a) { return e.Fav(t) } } })])], 1)]) }), 0), a('div', { staticStyle: { height: '180px', width: '100%', clear: 'both' } })], 1) : e._e(), e.fontview == 2 ? a('div', { staticClass: 'cloud-container' }, [e._m(4), a('transition-group', { attrs: { appear: '', name: 'bounce', tag: 'div', mode: 'out-in' } }, e._l(e.isShare(e.SearchFile(e.fileIndex)), function (t) { return a('div', { key: t['FID'], staticClass: 'file' }, [a('div', { staticClass: 'file-logo', on: { click: function (a) { return e.vshowdetail(t) } } }, [a('div', { directives: [{ name: 'show', rawName: 'v-show', value: t.FShare == 1, expression: '(fileInfo.FShare==1)' }], staticClass: 'share' }), a('div', { staticClass: 'filewith' }), a('div', { staticClass: 'name' }, [a('p', { staticClass: 'pname' }, [e._v(e._s(t['FName']))])])]), a('div', { staticClass: 'options', style: e.isfav(t) }, [a('div', { staticClass: 'checkbox' }, [a('input', { directives: [{ name: 'model', rawName: 'v-model', value: e.Selected, expression: 'Selected' }], attrs: { type: 'checkbox', id: t['FID'] }, domProps: { value: t, checked: Array.isArray(e.Selected) ? e._i(e.Selected, t) > -1 : e.Selected }, on: { change: function (a) { var i = e.Selected; var r = a.target; var n = !!r.checked; if (Array.isArray(i)) { var s = t; var o = e._i(i, s); r.checked ? o < 0 && (e.Selected = i.concat([s])) : o > -1 && (e.Selected = i.slice(0, o).concat(i.slice(o + 1))) } else e.Selected = n } } }), a('label', { attrs: { for: t['FID'] } })]), a('div', { staticClass: 'download', on: { click: function (a) { return e.download(t) } } }), a('div', { staticClass: 'delete', on: { click: function (a) { return e.deletefile(t['FID'], 0) } } }), a('p', { staticStyle: { float: 'left', width: '100px', height: '20px', 'margin-top': '8px', 'margin-left': '5px' } }, [e._v(e._s(t['Ftime'].substring(0, 10)))]), a('div', { staticStyle: { height: '20px', width: '160px', cursor: 'auto' } }, [e._v('Size:' + e._s(e.fileSize(t['Fsize'])))]), a('transition', { attrs: { name: 'bounce-x' } }, [a('div', { directives: [{ name: 'show', rawName: 'v-show', value: t.Fav == 0, expression: '(fileInfo.Fav==0)' }], staticClass: 'fav', on: { click: function (a) { return e.Fav(t) } } })]), a('transition', { attrs: { name: 'bounce-x' } }, [a('div', { directives: [{ name: 'show', rawName: 'v-show', value: t.Fav == 1, expression: '(fileInfo.Fav==1)' }], staticClass: 'faved', on: { click: function (a) { return e.Fav(t) } } })])], 1)]) }), 0), a('div', { staticStyle: { height: '180px', width: '100%', clear: 'both' } })], 1) : e._e()], 1) }; var D = [function () { var e = this; var t = e.$createElement; var a = e._self._c || t; return a('div', { attrs: { id: 'home' } }, [a('div', { attrs: { id: 'hlogo' } }), a('p', [e._v('Home')])]) }, function () { var e = this; var t = e.$createElement; var a = e._self._c || t; return a('button', { attrs: { id: 'up' } }, [a('p', [e._v('上传文件')])]) }, function () { var e = this; var t = e.$createElement; var a = e._self._c || t; return a('div', [a('p', [e._v('文件:')])]) }, function () { var e = this; var t = e.$createElement; var a = e._self._c || t; return a('div', [a('p', [e._v('文件:')])]) }, function () { var e = this; var t = e.$createElement; var a = e._self._c || t; return a('div', [a('p', [e._v('文件:')])]) }]; var U = (a('87c1'), a('6183'), a('b43c'), a('13ee')); var j = (a('ec91'), a('9af0'), function () { var e = this; var t = e.$createElement; var a = e._self._c || t; return a('div', { attrs: { id: 'dash' } }, [a('div', { staticClass: 'bc' }, [a('div', { attrs: { id: 'head' } }), a('div', { attrs: { id: 'name' } }, [e._v('用户名:' + e._s(e.username))]), a('div', { attrs: { id: 'Sex' } }, [e._v('性别:' + e._s(e.sex))])]), a('div', { staticClass: 'bc', attrs: { id: 'VIP' } }, [a('div', { class: { VIP: e.isvip }, attrs: { id: 'VIPimg' } }), a('div', { class: { VIP: e.isvip } }, [e._v('您是VIP会员')]), a('div', { class: { VIP: e.isvip }, attrs: { id: 'VIPEND' } }, [e._v(e._s(e.VIPend))]), a('button', { class: { VIP: e.isvip } }, [e._v('续费会员')]), a('button', { staticStyle: { 'background-color': 'lightcoral', width: '40px' } }, [a('router-link', { attrs: { to: '/Logout' } }, [a('p', [e._v('X')])])], 1)])]) }); var O = []; var A = { data: function () { return { username: localStorage.username, sex: localStorage.Sex, VIPend: localStorage.VIPend, isvip: !1 } }, methods: {} }; var B = A; var $ = (a('16a0'), Object(f['a'])(B, j, O, !1, null, null, null)); var E = $.exports; var z = function () { var e = this; var t = e.$createElement; var a = e._self._c || t; return a('div', { staticClass: 'vuejs-uploader', class: { 'vuejs-uploader--dragged': e.isDraggedOver && !e.isBrowseDisabled }, on: { drop: function (t) { return t.stopPropagation(), t.preventDefault(), e.dropFiles(t) }, dragover: function (t) { return t.stopPropagation(), t.preventDefault(), e.dragover(t) }, dragleave: e.dragleave } }, [a('label', { class: { disabled: e.isBrowseDisabled } }, [e.isSingleFileUpload ? a('span', [e._t('browse-btn', [a('span', { staticClass: 'vuejs-uploader__btn' }, [e._v('选择')])]), e.files[0] && e.hasError(e.files[0]) && e.showErrors ? a('p', { staticClass: 'vuejs-uploader__error' }, [e._v(e._s(e.handleError(e.files[0].error)))]) : e._e(), e.showProgressBar && e.files[0] ? a('div', { staticClass: 'vuejs-uploader__progress' }, [a('div', { staticClass: 'vuejs-uploader__progress-bar', style: e.progressBarStyle(e.files[0]) })]) : e._e()], 2) : e._e(), e.isMultipleFileUpload ? a('span', [e._t('browse-btn', [a('span', { staticClass: 'vuejs-uploader__btn' }, [e._v('选择')])])], 2) : e._e(), a('input', { attrs: { type: 'file', disabled: e.isBrowseDisabled, multiple: e.multiple, accept: e.accept }, on: { change: e.selectFiles } })]), e.isMultipleFileUpload ? a('span', [a('button', { staticClass: 'vuejs-uploader__btn vuejs-uploader__btn--clear', attrs: { type: 'button', disabled: e.noFiles }, on: { click: e.clear } }, [e._t('clear-btn', [e._v('清空')])], 2), a('button', { staticClass: 'vuejs-uploader__btn vuejs-uploader__btn--upload', class: { 'vuejs-uploader__btn--ready': e.hasFiles }, attrs: { type: 'button', disabled: e.isUploadDisabled }, on: { click: e.upload } }, [e._t('upload-btn', [e._v('上传')])], 2)]) : e._e(), e.errorMessage ? a('div', { staticClass: 'vuejs-uploader__error' }, [e._v(e._s(e.errorMessage))]) : e._e(), e.isMultipleFileUpload ? a('ul', { staticClass: 'vuejs-uploader__queue' }, e._l(this.files, function (t, i) { return a('li', { key: i, staticClass: 'vuejs-uploader__file' }, [a('div', { staticClass: 'vuejs-uploader__file--preview' }, [e.isImageUpload(t) && !t.image ? a('div', { staticClass: 'loading' }) : e._e(), t.image ? a('img', { attrs: { src: t.image } }) : e._e(), e.isImageUpload(t) ? e._e() : a('span', { staticClass: 'vuejs-uploader__file-icon', class: t.extension }, [e._v(e._s(t.extension))])]), a('div', { staticClass: 'vuejs-uploader__file--meta' }, [a('p', { staticClass: 'vuejs-uploader__file--filename' }, [e._v(e._s(t.file.name))]), a('p', { staticClass: 'vuejs-uploader__file--filesize' }, [e._v(e._s(t.formattedFilesize))]), t.error && e.showErrors ? a('p', [e._v(e._s(e.handleError(t.error)))]) : e._e(), e._t('extra', null, { fileObj: t }), a('div', { staticClass: 'vuejs-uploader__progress' }, [a('div', { staticClass: 'vuejs-uploader__progress-bar', style: e.progressBarStyle(t) })])], 2), a('div', [a('button', { staticClass: 'vuejs-uploader__btn vuejs-uploader__btn--delete', attrs: { type: 'button' }, on: { click: function (a) { return e.removeFile(t) } } }, [e._t('remove-btn', [e._v('移除')])], 2)])]) }), 0) : e._e()]) }; var R = []; var M = (a('1ba2'), a('e261'), a('9c3a'), a('b5bf'), a('238d'), a('5e91'), a('329e'), { post: (function () { var e = Object(U['a'])(regeneratorRuntime.mark(function e (t, a, i) { var r; return regeneratorRuntime.wrap(function (e) { while (1) switch (e.prev = e.next) { case 0:return e.prev = 0, e.next = 3, s.a.post(t, a, i); case 3:return r = e.sent, e.abrupt('return', new Promise(function (e, t) { r !== null ? e(r) : t(r) })); case 7:e.prev = 7, e.t0 = e['catch'](0), alert('系统运行错误'); case 10:case 'end':return e.stop() } }, e, null, [[0, 7]]) })); function t (t, a, i) { return e.apply(this, arguments) } return t }()) }); var T = a('50a6'); var V = a('47c9'); var J = { fileSize: function (e, t, a, i, r) { var n = (t = Math, a = t.log, i = 1e3, r = a(e) / a(i) | 0, e / t.pow(i, r)).toFixed(2) + ' ' + (r ? 'kMGTPEZY'[--r] + 'B' : 'Bytes'); return n }, fileExtension: function (e) { return e ? e.slice(2 + (e.lastIndexOf('.') - 1 >>> 0)) : '' } }; var L = (function () { function e (t) { Object(T['a'])(this, e), this.file = t, this.filesize = t.size, this.formattedFilesize = J.fileSize(t.size), this.error = null, this.percentageUploaded = 0, this.uploadedParts = [], this.totalParts = 1, this.extension = J.fileExtension(t.name), this.isUploading = !1 } return Object(V['a'])(e, [{ key: 'setProgress', value: function (e) { this.percentageUploaded = Math.round(100 * e.loaded / e.total) } }, { key: 'setMultipartProgress', value: function (e, t, a) { this.totalParts = t, this.addPart(a); var i = this.uploadedParts.findIndex(function (e) { return e.part === a }); return this.uploadedParts[i].loaded = Math.round(100 * e.loaded / e.total), this.percent } }, { key: 'addPart', value: function (e) { this.uploadedParts.indexOf(e) === -1 && this.uploadedParts.push({ part: e, loaded: 0 }) } }, { key: 'singlepartUploadPercent', get: function () { return this.percentageUploaded } }, { key: 'multipartUploadPercent', get: function () { var e = 100 / this.totalParts; var t = this.uploadedParts.reduce(function (t, a) { return t + a.loaded * e / 100 }, 0); return t } }]), e }()); var q = a('76fa'); var H = a('f040'); var X = a('ede8'); var G = (function (e) { function t (e) { var a; return Object(T['a'])(this, t), a = Object(q['a'])(this, Object(H['a'])(t).call(this, e)), a.image = null, a } return Object(X['a'])(t, e), t }(L)); var W = a('7cb4'); var Y = a.n(W); var Z = { props: { endPoint: { type: String, required: !0 }, FPID: { type: Number, required: !0 }, showErrors: { type: Boolean, default: !0 }, accept: String, multiple: Boolean, multipart: Boolean, multipartChunkSize: { type: Number, default: 2097152 }, maxUploads: { type: Number, default: 5 }, maxThumbWidth: { type: Number, default: 80 }, maxThumbHeight: { type: Number, default: 80 }, userDefinedProperties: Array, showProgressBar: { type: Boolean, default: !1 }, disabled: Boolean }, data: function () { return { axios: null, files: [], errorMessage: null, isDraggedOver: null, headers: { APPFUNC: '4', Authorization: localStorage.token } } }, computed: { getFiles: function () { return this.files }, hasFiles: function () { return !this.noFiles }, isSingleFileUpload: function () { return !this.multiple }, isMultipleFileUpload: function () { return this.multiple }, isMultipartUpload: function () { return this.multipart }, isBrowseDisabled: function () { return this.disabled }, isUploadDisabled: function () { var e = this; var t = !0; return this.userDefinedProperties && this.userDefinedProperties.forEach(function (a) { e.files.forEach(function (e) { a.required && !e[a.property] && (t = !1) }) }), !this.files.length || !t }, noFiles: function () { return this.files.length === 0 } }, methods: { dragover: function () { this.isDraggedOver = !0 }, dragleave: function () { this.isDraggedOver = !1 }, upload: function () { var e = this; if (this.isUploadDisabled) return !1; this.resetError(), this.files.forEach(function (t) { return e.uploadFile(t) }) }, clear: function () { this.resetError(), this.files = [] }, isImageUpload: function (e) { return e.hasOwnProperty('image') }, isImage: function (e) { return ['image/jpeg', 'image/png', 'image/gif'].includes(e.type) }, getFilekey: (function () { var e = Object(U['a'])(regeneratorRuntime.mark(function e () { var t, a; return regeneratorRuntime.wrap(function (e) { while (1) switch (e.prev = e.next) { case 0:return e.prev = 0, e.next = 3, M.post('/serverB/controller.php', null, { headers: { APPFUNC: 10 } }); case 3:return t = e.sent, e.next = 6, M.post('/serverA/controller.php', t.data, { headers: { APPFUNC: 4 } }); case 6:return a = e.sent, e.abrupt('return', new Promise(function (e, i) { t !== null ? e(a) : i(a) })); case 10:e.prev = 10, e.t0 = e['catch'](0), alert('文件密钥生成失败，请联系管理员'); case 13:case 'end':return e.stop() } }, e, null, [[0, 10]]) })); function t () { return e.apply(this, arguments) } return t }()), uploadFile: function (e) { return !e.isUploading && (e.isUploading = !0, this.multipartUploadFile(e), !0) }, str2ab: function (e) { for (var t = new ArrayBuffer(e.length), a = new Uint8Array(t), i = 0, r = e.length; i < r; i++)a[i] = e.charCodeAt(i); return t }, multipartUploadFile: (function () { var e = Object(U['a'])(regeneratorRuntime.mark(function e (t) { var a, i, r, n, s, o, l, c, u, d, p, h, f; return regeneratorRuntime.wrap(function (e) { while (1) switch (e.prev = e.next) { case 0:return e.next = 2, this.getFilekey(); case 2:a = e.sent, i = Y.a.util.hexToBytes(a.data.Fkey), r = Y.a.util.hexToBytes(a.data.FIV), n = a.data.FID, s = this.FPID, o = Math.ceil(t.file.size / this.multipartChunkSize), l = Y.a.cipher.createCipher('AES-CFB', i), l.start({ iv: r }), c = 1; case 11:if (!(c <= o)) { e.next = 24; break } return e.next = 14, this.getFileChunk(t, c); case 14:if (u = e.sent, l.update(Y.a.util.createBuffer(u)), !(l.output.length() > 0)) { e.next = 21; break } return d = this.str2ab(l.output.getBytes()), p = new Blob([d]), e.next = 21, this.perthreadupload(n, s, p, t, c, o); case 21:c++, e.next = 11; break; case 24:if (l.finish(), h = this.str2ab(l.output.getBytes()), !(l.output.length() > 0)) { e.next = 30; break } return f = new Blob([h]), e.next = 30, this.perthreadupload(n, s, f, t, c, o); case 30:this.Encprogress = 0, this.$emit('fileUploaded', { file: t }); case 32:case 'end':return e.stop() } }, e, this) })); function t (t) { return e.apply(this, arguments) } return t }()), perthreadupload: (function () { var e = Object(U['a'])(regeneratorRuntime.mark(function e (t, a, i, r, n, s) { var o; var l; var c = this; return regeneratorRuntime.wrap(function (e) { while (1) switch (e.prev = e.next) { case 0:o = new FormData(), l = { onUploadProgress: function (e) { r.setMultipartProgress(e, s, n) } }, o.append('FID', t), o.append('FPID', a), o.append('multipart', !0), o.append('file', i), o.append('filename', r.file.name), o.append('mime', r.file.type), o.append('totalSize', r.file.size), o.append('partSize', this.multipartChunkSize), o.append('totalParts', s), o.append('currentPart', n), o = this.appendUserData(r, o), this.$http.post(this.endPoint, o, l).then(function (e) { e && c.$emit('chunkUploaded', r, n) }).catch(function (e) { c.$emit('error', e) }); case 14:case 'end':return e.stop() } }, e, this) })); function t (t, a, i, r, n, s) { return e.apply(this, arguments) } return t }()), cleanQueue: function (e, t, a) { return a && a.data.meta && a.data.meta.remainingParts ? e.filter(function (e) { var i = !1 === a.data.meta.remainingParts.includes(e.currentPart); return i && t.uploadedParts.push({ part: e.currentPart, loaded: 100 }), !i }) : e }, getFileChunk: (function () { var e = Object(U['a'])(regeneratorRuntime.mark(function e (t, a) { var i, r; return regeneratorRuntime.wrap(function (e) { while (1) switch (e.prev = e.next) { case 0:return i = (a - 1) * this.multipartChunkSize, r = Math.min(i + this.multipartChunkSize, t.file.size), e.abrupt('return', new Promise(function (e, a) { var n = new FileReader(); n.readAsArrayBuffer(t.file.slice(i, r)), n.onload = function () { e(n.result) }, n.onerror = a })); case 3:case 'end':return e.stop() } }, e, this) })); function t (t, a) { return e.apply(this, arguments) } return t }()), selectFiles: function (e) { this.addFiles(e.target.files) }, dropFiles: function (e) { this.isDraggedOver = !1, this.addFiles(e.dataTransfer.files) }, addFiles: function (e) { var t = this; Array.from(e).forEach(function (e) { if (t.files.length === t.maxUploads) return t.setError('Only ' + t.maxUploads + ' files can be uploaded at one time'), !1; if (t.files.findIndex(function (t) { return t.file.name === e.name }) === -1) { var a = t.uploadFactory(e); t.files.push(a) } }), this.multiple || (this.resetError(), this.upload(), this.$emit('startUpload')), this.browse = null }, setError: function (e) { this.errorMessage = e }, resetError: function () { this.errorMessage = null }, uploadFactory: function (e) { var t; return this.isImage(e) ? (t = new G(e), this.isMultipleFileUpload && this.getPreviewImage(t)) : t = new L(e), this.appendUserProperties(t) }, appendUserProperties: function (e) { return this.userDefinedProperties && this.userDefinedProperties.forEach(function (t) { e[t.property] = null }), e }, appendUserData: function (e, t) { return this.userDefinedProperties && this.userDefinedProperties.forEach(function (a) { t.append(a.property, e[a.property]) }), t }, removeFile: function (e) { this.$el.querySelector('input[type=file]').value = null, this.resetError(); var t = this.files.indexOf(e); this.files.splice(t, 1) }, getPreviewImage: function (e) { var t = this; var a = new FileReader(); a.onload = function (a) { t.resizeImage(a.target.result, t.maxThumbWidth, t.maxThumbHeight, e) }, a.readAsDataURL(e.file) }, resizeImage: function (e, t, a, i) { var r = this; var n = document.createElement('canvas'); var s = new Image(); var o = n.getContext('2d'); s.src = e, s.onload = function () { var e = r.calculateAspectRatioFit(s.width, s.height, t, a); n.width = e.width, n.height = e.height, o.drawImage(s, 0, 0, s.width, s.height, 0, 0, n.width, n.height), i.image = n.toDataURL(i.file.type, 0.8) } }, calculateAspectRatioFit: function (e, t, a, i) { var r = Math.min(a / e, i / t); return { width: e * r, height: t * r } }, progressBarStyle: function (e) { return this.isMultipartUpload && e.filesize > this.multipartChunkSize ? { width: e.multipartUploadPercent + '%' } : { width: e.singlepartUploadPercent + '%' } }, configureHttpClient: function () { var e = {}; this.headers && (e.headers = this.headers), s.a.defaults.baseURL = 'http://192.168.139.128', this.$http = s.a.create(e) }, hasError: function (e) { return Boolean(e.error) }, handleError: function (e) { return e } }, mounted: function () { var e = this; this.configureHttpClient(), this.$on('fileUploaded', function (t) { return e.removeFile(t) }) } }; var Q = Z; var K = (a('d6a33'), Object(f['a'])(Q, z, R, !1, null, null, null)); var ee = K.exports; var te = a('3452'); var ae = a.n(te); var ie = { name: 'cloud', components: { dash: E, Uploader: ee }, data: function () { return { username: '', usex: '', uVIP: '', Vend: '', FName: '', NFname: '', FPID: null, FNowID: 0, FNowName: '', FullFPID: [0], FullPName: [], showdash: !1, showup: !1, shownf: !1, showdetail: !1, fileIndex: {}, search: '', Selected: [], PC: [], r: !1, multipartChunkSize: 2097152, totalP: 0, NowP: 0, progress: 0, StorageUsed: 0, StorageTotal: 0, detailinfo: {}, FDIR: '', fontview: 0 } }, mounted: function () { this.userinit() }, watch: { fileIndex: function (e) { this.fileIndex = e }, FNowID: function (e) { this.FNowID = e } }, methods: { SearchFile: function () { var e = this.search; if (Array.isArray(this.fileIndex)) return this.fileIndex.filter(function (t) { if (t['FName'].match(e) != null) return t }) }, isdir: function (e) { if (e) return e.filter(function (e) { if (e.Ftype == 1) return e }) }, isfile: function (e) { if (e) return e.filter(function (e) { if (e.Ftype == 0) return e }) }, isLocation: function (e) { if (e) { var t = this; return e.filter(function (e) { if (e.FPID == t.FNowID) return e }) } }, isShare: function (e) { if (e) return e.filter(function (e) { if (e.FShare == 1) return e }) }, isFaved: function (e) { if (e) return e.filter(function (e) { if (e.Fav == 1) return e }) }, isfav: function (e) { if (e.Fav == 1) return 'background: #cfd8dc;' }, fileSize: function (e, t, a, i, r) { var n = (t = Math, a = t.log, i = 1e3, r = a(e) / a(i) | 0, e / t.pow(i, r)).toFixed(2) + ' ' + (r ? 'kMGTPEZY'[--r] + 'B' : 'Bytes'); return n }, userinit: function () { var e = this; o.post('/serverA/controller.php', null, { headers: { APPFUNC: 3 } }).then(function (e) { e.data && (localStorage.Sex = e.data['Sex'], localStorage.Regdate = e.data['Regdate'], localStorage.VIPend = e.data['VIPend'], localStorage.mail = e.data['mail'], localStorage.Phone = e.data['Phone']) }), o.post('/serverB/controller.php', null, { headers: { APPFUNC: 3 } }).then(function (t) { e.$data.fileIndex = t.data }), o.post('/serverB/controller.php', null, { headers: { APPFUNC: 12 } }).then(function (t) { e.$data.StorageUsed = t.data.StorageUsed, e.$data.StorageTotal = t.data.StorageTotal }) }, diskcolor: function (e) { if (this.fontview == e) return 'background-color:#eee;' }, download: (function () { var e = Object(U['a'])(regeneratorRuntime.mark(function e (t) { var a; return regeneratorRuntime.wrap(function (e) { while (1) switch (e.prev = e.next) { case 0:if (t.FID == null) { e.next = 12; break } return e.prev = 1, e.next = 4, M.post('/serverA/controller.php', t, { headers: { APPFUNC: 5 } }); case 4:return a = e.sent, this.mulitpartsdownload(t, a), e.abrupt('return', new Promise(function (e, t) { a !== null ? e(a) : t(a) })); case 9:e.prev = 9, e.t0 = e['catch'](1), alert('出现错误'); case 12:case 'end':return e.stop() } }, e, this, [[1, 9]]) })); function t (t) { return e.apply(this, arguments) } return t }()), str2ab: function (e) { for (var t = new ArrayBuffer(e.length), a = new Uint8Array(t), i = 0, r = e.length; i < r; i++)a[i] = e.charCodeAt(i); return t }, ondec: (function () { var e = Object(U['a'])(regeneratorRuntime.mark(function e (t, a, i) { var r; return regeneratorRuntime.wrap(function (e) { while (1) switch (e.prev = e.next) { case 0:return t += a.output.getBytes(), a.update(Y.a.util.createBuffer(i.data)), r = new Object(), r.decrypted = t, r.decipher = a, e.abrupt('return', new Promise(function (e, t) { r !== null ? e(r) : t(r) })); case 6:case 'end':return e.stop() } }, e) })); function t (t, a, i) { return e.apply(this, arguments) } return t }()), mulitpartsdownload: (function () { var e = Object(U['a'])(regeneratorRuntime.mark(function e (t, a) { var i, r, n, s, o, l, c, u, d, p, h; return regeneratorRuntime.wrap(function (e) { while (1) switch (e.prev = e.next) { case 0:i = Y.a.util.hexToBytes(a.data.Fkey), r = Y.a.util.hexToBytes(a.data.FIV), n = Math.ceil(t.Fsize / this.multipartChunkSize), s = 0, o = '', l = Y.a.cipher.createDecipher('AES-CFB', i), l.start({ iv: r }); case 7:return c = new Object(), c.FID = t.FID, c.PID = s, u = JSON.stringify(c), e.next = 13, M.post('/serverB/controller.php', u, { headers: { APPFUNC: 6 }, responseType: 'arraybuffer' }); case 13:return d = e.sent, e.next = 16, this.ondec(o, l, d); case 16:p = e.sent, o = p.decrypted, l = p.decipher, this.progress = s / n, s++; case 21:if (s < n) { e.next = 7; break } case 22:l.finish(), this.progress = s / n, o += l.output.getBytes(), h = new Blob([this.str2ab(o)]), ae()(h, t.FName); case 27:case 'end':return e.stop() } }, e, this) })); function t (t, a) { return e.apply(this, arguments) } return t }()), deletefile: function (e, t) { var a = this; if (e != null) { var i; if (i = t != 0 || confirm('确定要删除这个文件吗?'), i == 1) { var r = new Object(); r.FID = e; var n = JSON.stringify(r); o.post('/serverB/controller.php', n, { headers: { APPFUNC: 7 } }).then(function (e) { e.data == 1 && o.post('/serverA/controller.php', n, { headers: { APPFUNC: 7 } }).then(function (e) { e.data == 1 && a.userinit() }) }) }i = !1 } }, processqueue: function (e) { if (!this.Selected.length) return alert('请选择后再进行操作'), 0; var t = 1; if (e == 1) while (t)t = this.Selected.shift(), t && this.download(t); if (e == 2) { var a = confirm('确定要删除这些文件吗?'); if (a == 1) while (t)t = this.Selected.shift(), t && this.deletefile(t.FID, !0) } this.NowP++ }, vshowdash: function () { this.$data.showdash = !this.$data.showdash }, vshowup: function () { this.$data.showup = !this.$data.showup, this.userinit() }, vshownf: function () { this.$data.shownf = !this.$data.shownf }, newFolder: function () { var e = this; if (this.NFname == '')alert('请输入文件夹名称！'); else { var t = new Object(); t.FPID = this.FNowID, t.NFname = this.NFname; var a = JSON.stringify(t); o.post('/serverB/controller.php', a, { headers: { APPFUNC: 8 } }).then(function (t) { t.data != 'error' && (e.NFname = '', e.userinit()) }), this.shownf = !this.shownf } }, chgview: function () { this.FullPName = [], this.FullFPID = [0], this.FPID = null, this.FNowID = 0, this.FNowName = '' }, enterFolder: function (e) { e != null && (this.FullPName.push(e.FName), this.FullFPID.push(e.FPID), this.FPID = e.FPID, this.FNowID = e.FID, this.FNowName = e.FName, this.search = '') }, backtoFolder: function (e) { e != null && (this.FPID = e, this.FNowName = this.FullPName.pop(), this.FNowID = this.FullFPID.pop(), this.search = '') }, getLocation: function (e) { var t = ''; return e.forEach(function (e) { t = t + '/' + e }), t }, Fav: function (e) { var t = this; e.Fav == 0 ? o.post('/serverB/controller.php', e, { headers: { APPFUNC: 9 } }).then(function (e) { e && t.userinit() }) : e.Fav == 1 && o.post('/serverB/controller.php', e, { headers: { APPFUNC: 11 } }).then(function (e) { e && t.userinit() }) }, delteFolder: function (e) { var t = this; this.FullFPID.push(e.FID), this.fileIndex.forEach(function (a) { a.FPID == e.FID && (a.Ftype == 0 ? t.deletefile(a.FID, 1) : a.Ftype == 1 && t.delteFolder(a)) }); var a = this.FullFPID.pop(); this.deletefile(a, 1) }, vshowdetail: function (e) { this.detailinfo = e, this.showdetail = !0 }, sharethefile: (function () { var e = Object(U['a'])(regeneratorRuntime.mark(function e (t) { var a; var i; var r; var n; var s; var l = this; return regeneratorRuntime.wrap(function (e) { while (1) switch (e.prev = e.next) { case 0:if (t.FID == 0) { e.next = 14; break } return a = new Object(), a.FID = t.FID, i = JSON.stringify(a), e.next = 6, M.post('/serverA/controller.php', i, { headers: { APPFUNC: 5 } }); case 6:r = e.sent, n = new Object(), n.FID = r.data.FID, n.FIV = r.data.FIV, n.Fkey = r.data.Fkey, n.FName = t.FName, s = JSON.stringify(n), o.post('/serverB/controller.php', s, { headers: { APPFUNC: 5 } }).then(function (e) { if (e) { l.detailinfo.FShare = 1, l.FDIR = e.data; var a = document.getElementById('sctxt'); a.value = 'http://192.168.139.128/serverB' + e.data.substr(1, e.data.length) + '/' + t.FName } }); case 14:case 'end':return e.stop() } }, e) })); function t (t) { return e.apply(this, arguments) } return t }()), getshare: function (e) { var t = this; return e.FShare == 0 ? 0 : e.FShare == 1 ? (o.post('/serverB/controller.php', e, { headers: { APPFUNC: 13 } }).then(function (a) { t.FDIR = a.data; var i = document.getElementById('sctxt'); i.value = 'http://192.168.139.128/serverB' + a.data.substr(1, a.data.length) + '/' + e.FName }), 1) : void 0 }, shareurl: function () { var e = document.getElementById('sctxt'); e.select(), document.execCommand('Copy'), alert('文件地址已复制到剪贴板！') }, unsharethefile: function (e) { var t = this; var a = new Object(); a.FName = e.FName, a.FID = e.FID; var i = JSON.stringify(a); o.post('/serverB/controller.php', i, { headers: { APPFUNC: 14 } }).then(function (e) { e && (t.userinit(), t.detailinfo.FShare = 0) }) } } }; var re = ie; var ne = (a('a7bc'), a('1ccf'), Object(f['a'])(re, N, D, !1, null, '8ac70f5c', null)); var se = ne.exports; function oe (e, t, a) { l.loggedIn() ? a() : a({ path: '/login', query: { redirect: e.fullPath } }) }i['a'].use(r['a']); var le = new r['a']({ mode: 'history', base: './', routes: [{ path: '/Cloud', component: se, beforeEnter: oe }, { path: '/login', component: x }, { path: '/reg', component: I }, { path: '/', redirect: './Cloud' }, { path: '/logout', beforeEnter: function (e, t, a) { l.logout(), a('/login') } }] }); new i['a']({ router: le, render: function (e) { return e(m) } }).$mount('#app') }, '1ee6': function (e, t, a) { 'use strict'; var i = a('915a'); var r = a.n(i); r.a }, 3560: function (e, t, a) { 'use strict'; var i = a('e65b'); var r = a.n(i); r.a }, '379f': function (e, t, a) { 'use strict'; var i = a('3fc4'); var r = a.n(i); r.a }, '3be2': function (e, t, a) { 'use strict'; var i = a('7621'); var r = a.n(i); r.a }, '3fc4': function (e, t, a) {}, '4e9d': function (e, t, a) {}, '745a': function (e, t, a) {}, 7621: function (e, t, a) {}, '915a': function (e, t, a) {}, a323: function (e, t, a) {}, a72a: function (e, t, a) { 'use strict'; var i = a('745a'); var r = a.n(i); r.a }, a7bc: function (e, t, a) { 'use strict'; var i = a('a323'); var r = a.n(i); r.a }, d6a33: function (e, t, a) { 'use strict'; var i = a('ea99'); var r = a.n(i); r.a }, e65b: function (e, t, a) {}, ea99: function (e, t, a) {}, fcf2: function (e, t, a) {} })
// # sourceMappingURL=app.8987a59f.js.map
